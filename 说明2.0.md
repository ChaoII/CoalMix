
#### 1. 使用docker部署

##### 1。1.解压缩镜像文件

```bash
# 解压后生成文件cvxpy-x64-v2.0.tar
unzip cvxpy-x64-v2.0.zip
```
==**注意:**== 也可以用鼠标点击压包，直接解压，在导入镜像时镜像的后缀一定是`.tar`


##### 1.2. 导入镜像

```bash
docker import cvxpy-x64-v2.0.tar cvxpy:v2.0
```

##### 1.3. 启动镜像

```bash
docker run -itd --name coal_mix_opt --restart always -w /app -p 5053:8000 cvxpy-x64:v2.0 uvicorn main:app --host 0.0.0.0 --port 8000
```

**参数说明**
- `--name -n`: 容器名称，可以自定义
- `-w`:  设置工作目录
- `--restart always`: 容器启动后自动重启
- `--port -p`: 端口映射`-p 宿主机端口:容器端口` 其中`容器端口`在容器种已经固定，外部调用的时候只需要对应上`宿主机端口`即可。
- `uvicorn main:app --host 0.0.0.0 --port 8000`: 启动uvicorn服务，`main:app`为启动的模块，`--host 0.0.0.0 --port 8000`为服务端口。

##### 1.4. 调用方式

输入以下下地址打开`openapi`文档页面
```bash
http://localhost:5053/docs
```

#### 2. 直接执行可执行程序进行部署
##### 2.1 解压文件
```bash
unzip dis.zip
```
或者直接鼠标点击解压

##### 2.2 执行可执行程序
```bash
colal_mix_opt.exe --host "0.0.0.0" --port 5053 --workers 1
```
**参数说明**
- `--host`: 服务器地址
- `--port`: 服务器端口
- `--workers`: 进程数

==**注意：**== 直接执行`colal_mix_opt.exe`就是上述默认参数，如果需要修改可以执行修改， 如果需要做开机自启，或者定期任务，请自行在对应操作系统中进行配置


> 上述两种部署方式推荐方式1，原因有4：
> 1. 环境一致性强，不会因为机器太老旧出现缺乏依赖等其他兼容性问题
> 2. 跨平台，镜像中的环境均为linux环境，可以在linux和windows上部署
> 3. 效率高，uvicorn服务器，openblas等并行库在linux上效率更高
> 4. 可以通过docker集中管理，具有异常崩溃重启等机制
> 
> **仅当docker基础环境困难时使用方式2**
